<root BTCPP_format="4">
    <include path="./subtrees/subtree_cam_find_and_track_ball.xml" />
    <include path="./subtrees/subtree_locate.xml" />
    <include path="./subtrees/subtree_auto_standup_and_locate.xml" />
    <include path="./subtrees/subtree_find_ball.xml" />

    
    <BehaviorTree ID="MainTree">
        <Sequence name="root">
            <RunOnce><Script code="control_state=3" /></RunOnce>
            <ReactiveSequence _while="control_state==3" name="Penalty Mode">
                <Speak text="penalty mode" />
                <SubTree ID="AutoGetUpAndLocate" _autoremap="true" />
                <ReactiveSequence _while="!gc_is_under_penalty" name="Penalty Game">
                    <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
                    <ReactiveSequence _while="player_role == 'striker'" name="Striker Penalty">
                        <CamTrackBall _while="ball_location_known" />
                        <CalcKickDir />
                        <SubTree ID="FindBall" _while="!(ball_location_known || tm_ball_pos_reliable)" _autoremap="true" />
                        <Kick vx_limit="1.2" vy_limit="0.4" max_msec_kick="3000" kick_range="0.3"/>
                    </ReactiveSequence>
                    <ReactiveSequence _while="player_role == 'goal_keeper'" name="Goalie Penalty">
                        <SubTree ID="CamFindAndTrackBall" _autoremap="true" />
                        <CamTrackBall _while="ball_location_known" />
                    </ReactiveSequence>
                    <SubTree ID="Locate" _autoremap="true" />
                </ReactiveSequence>
                <ReactiveSequence _while="gc_is_under_penalty" name="Under Penalty">
                    <SetVelocity />
                    <CamScanField _while="!odom_calibrated"/>
                    <SubTree ID="CamFindAndTrackBall" _autoremap="true" _while="odom_calibrated" />
                    <SelfLocateEnterField />
                </ReactiveSequence>
            </ReactiveSequence>
        </Sequence>
    </BehaviorTree>
</root>
